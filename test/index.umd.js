!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).VueTrackPlush={})}(this,(function(e){"use strict";var t=function(e){var t=new XMLHttpRequest;t.timeout=1e4;var n=""+(e.baseUrl?e.baseUrl:"")+(e.url?e.url:""),a=e.method.toUpperCase()||"POST";t.open(a,n,!0),t.withCredentials=!0,t.setRequestHeader("Content-type","application/json;charset=UTF-8"),t.send(JSON.stringify(e.data||{}))},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trackPlushConfig=t||{}}return n(e,[{key:"handleClickEvent",value:function(e){var t=this;if("customize"===e.type)this.handleSendTrack({buttonName:e.buttonName,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"点击事件"});else{var n=e.el.attributes["track-params"],a=n?n.value:null;e.el.addEventListener("click",(function(){t.handleSendTrack({buttonName:a,userAgent:t.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:t.trackPlushConfig.pageUrl||window.location.href,projectName:t.trackPlushConfig.projectName,actionType:"点击事件"})}))}}},{key:"handleSendTrack",value:function(e){t({timeout:1e4,baseURL:this.trackPlushConfig.baseURL,withCredentials:!0,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"post",data:e})}}]),e}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.trackPlushConfig=t||{}}return r(e,[{key:"handleBrowseEvent",value:function(e){if("customize"===e.type)this.handleSendTrack({pageName:e.pageName,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"});else{var t=e.el.attributes["track-params"],n=t?t.value:null;this.handleSendTrack({pageName:n,userAgent:this.trackPlushConfig.userAgent||navigator.userAgent,pageUrl:this.trackPlushConfig.pageUrl||window.location.href,projectName:this.trackPlushConfig.projectName,actionType:"浏览事件"})}}},{key:"handleSendTrack",value:function(e){t({timeout:1e4,baseURL:this.trackPlushConfig.baseURL,withCredentials:!0,url:this.trackPlushConfig.url,method:this.trackPlushConfig.method||"post",data:e})}}]),e}(),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.directive("track",{bind:function(e,n){n.arg.split("|").forEach((function(n){"click"===n?new a(t).handleClickEvent({el:e,type:"instruction"}):"browse"===n&&new i(t).handleBrowseEvent({type:"instruction",el:e})}))}})};"undefined"!=typeof window&&window.Vue&&o(window.Vue);var u={install:o};e.browseEvent=function(e){new i(e).handleBrowseEvent({pageName:e.pageName,type:"customize"})},e.clickEvent=function(e){new a(e).handleClickEvent({buttonName:e.buttonName,type:"customize"})},e.default=u,Object.defineProperty(e,"__esModule",{value:!0})}));
